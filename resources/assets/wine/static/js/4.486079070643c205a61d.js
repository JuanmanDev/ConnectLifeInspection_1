webpackJsonp([4],{Q81I:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=t("mvHQ"),n=t.n(o),i=t("A8Fc"),a=(t("Fd2+"),{name:"presenceSensor",mixins:[i.a],data:function(){return{presenseSensorDisplayPopup:!1,presenseSensorLightPopup:!1,openDisplayPopup:!1,openLightPopup:!1,closeDisplayPopup:!1,closeLightPopup:!1,presenceSensorSwitch:!0,presenseSensorDisplayText:"",presenseSensorLightText:"",openDisplayText:"",openLightText:"",closeDisplayText:"",closeLightText:"",clickSaveFlag:!1,presenseSensorDisplayList:[],presenseSensorLightList:[],doorOpenedDisplayList:[],doorOpenedLightList:[],doorClosedDisplayList:[],doorClosedLightList:[],paramsInfo:{},RemoteControlModeFlag:0,sabbathmode:0,sabbathModeStatus:0,showLoading:!1,onlineStatus:"1",oneZoneFlag:"",init_data:{}}},components:{},computed:{commonHeaderBg:function(){return{background:"#ffff"}},presenseSensorDisplayOption:function(){return this.autoGenerateText(this.presenseSensorDisplayList)},presenseSensorLightsOption:function(){return this.autoGenerateText(this.presenseSensorLightList)},doorOpenedDisplayOption:function(){return this.autoGenerateText(this.doorOpenedDisplayList)},doorOpenedLightsOption:function(){return this.autoGenerateText(this.doorOpenedLightList)},doorClosedDisplayOption:function(){return this.autoGenerateText(this.doorClosedDisplayList)},doorClosedLightsOption:function(){return this.autoGenerateText(this.doorClosedLightList)}},created:function(){this.oneZoneFlag=this.$route.query.oneZoneFlag||"0",console.log("this.oneZoneFlag的值",this.oneZoneFlag),"0"==this.oneZoneFlag?(this.presenseSensorDisplayList=[this.$t("lang.off"),this.$t("lang.presence_clockscreen"),this.$t("lang.presence_screen")],this.doorOpenedDisplayList=[this.$t("lang.off"),this.$t("lang.presence_clockscreen"),this.$t("lang.presence_screen")],this.doorClosedDisplayList=[this.$t("lang.off"),this.$t("lang.presence_clockscreen"),this.$t("lang.presence_screen")],this.doorOpenedLightList=[this.$t("lang.off"),this.$t("lang.presence_ambient"),this.$t("lang.presence_function")],this.doorClosedLightList=[this.$t("lang.off"),this.$t("lang.presence_ambient"),this.$t("lang.presence_function")],this.presenseSensorLightList=[this.$t("lang.off"),this.$t("lang.presence_ambient"),this.$t("lang.presence_function")]):"3"==this.oneZoneFlag?(this.doorOpenedLightList=[this.$t("lang.off"),this.$t("lang.presence_ambient"),this.$t("lang.presence_function")],this.doorClosedLightList=[this.$t("lang.off"),this.$t("lang.presence_ambient"),this.$t("lang.presence_function")],this.doorOpenedDisplayList=[this.$t("lang.presence_screen"),this.$t("lang.presence_clockscreen"),this.$t("lang.off")],this.doorClosedDisplayList=[this.$t("lang.presence_screen"),this.$t("lang.presence_clockscreen"),this.$t("lang.off")]):(this.presenseSensorDisplayList=[this.$t("lang.off"),this.$t("lang.presence_screen")],this.doorOpenedDisplayList=[this.$t("lang.off"),this.$t("lang.presence_screen")],this.doorClosedDisplayList=[this.$t("lang.off"),this.$t("lang.presence_screen")],this.doorOpenedLightList=[this.$t("lang.off"),this.$t("lang.presence_ambient"),this.$t("lang.presence_function")],this.doorClosedLightList=[this.$t("lang.off"),this.$t("lang.presence_ambient"),this.$t("lang.presence_function")],this.presenseSensorLightList=[this.$t("lang.presence_ambient"),this.$t("lang.presence_function")]),this.onlineStatus=this.$route.query.onlineStatus?this.$route.query.onlineStatus:"1",window.getDevicePropertiesInfoCallback=this.getDevicePropertiesInfoCallback,window.sendCmdCallback=this.sendCmdCallback,window.onBackPressedCallback=this.onBackPressedCallback,this.getDevicePropertiesInfo(),this.showLoading=!0},methods:{autoGenerateText:function(e){var s=[];for(var t in e){var o={};o[t]=e[t],s.push(o)}return s},getDevicePropertiesInfo:function(){var e={deviceId:this.deviceId};if(this.$native.getDevicePropertiesInfo(this.from,this.nativeKey,n()(e)),"html"==this.from){this.getDevicePropertiesInfoCallback({resultCode:0,data:{deviceNickName:"wineCooller1wineCooller2",deviceProps:{PresenceSensorOnOff:"0",PresenseSensorDisplay:"0",PresenseSensorLights:"1",DoorOpenedDisplay:"1",DoorOpenedLights:"1",DoorClosedDisplay:"0",DoorClosedLights:"1",RemoteControlMode:"1",SabbathMode:"0",SabbathModeStatus:"3"}},errorInfo:""})}},getDevicePropertiesInfo2:function(){var e={deviceId:this.deviceId};if(this.$native.getDevicePropertiesInfo(this.from,this.nativeKey,n()(e)),"html"==this.from){this.getDevicePropertiesInfoCallback({resultCode:0,data:{deviceNickName:"wineCooller1wineCooller2",deviceProps:{PresenceSensorOnOff:"0",PresenseSensorDisplay:"0",PresenseSensorLights:"1",DoorOpenedDisplay:"1",DoorOpenedLights:"0",DoorClosedDisplay:"0",DoorClosedLights:"1",RemoteControlMode:"1",SabbathMode:"0",SabbathModeStatus:"3"}},errorInfo:""})}},getDevicePropertiesInfoCallback:function(e){if(console.log("获取设备属性列表回调的callBack",n()(e)),this.proList=e,"0"==this.proList.resultCode||0==this.proList.resultCode){if("data"in this.proList&&"deviceProps"in this.proList.data){var s=this.proList.data,t=s.deviceProps;s.deviceNickName;"{}"==n()(this.init_data)?(console.log("modesUsage {}"),this.presenseSensorDisplay=Number(t.PresenseSensorDisplay),this.presenseSensorLights=Number(t.PresenseSensorLights),this.doorOpenedDisplay=Number(t.DoorOpenedDisplay),this.doorOpenedLights=Number(t.DoorOpenedLights),this.doorClosedDisplay=Number(t.DoorClosedDisplay),this.doorClosedLights=Number(t.DoorClosedLights),this.presenceSensorSwitch=1==Number(t.PresenceSensorOnOff),1==this.oneZoneFlag||2==this.oneZoneFlag?(this.getPresenceDisplayText(2==this.presenseSensorDisplay?1:0),this.getPresenceLightText(1==this.presenseSensorLights?0:1)):(this.getPresenceDisplayText(this.presenseSensorDisplay),this.getPresenceLightText(this.presenseSensorLights)),this.getOpenDisplayText(this.doorOpenedDisplay),this.getOpenLightText(this.doorOpenedLights),this.getCloseDisplayText(this.doorClosedDisplay),this.getCloseLightText(this.doorClosedLights),this.init_data=t,this.RemoteControlModeFlag=Number(t.RemoteControlMode),this.sabbathmode=Number(t.SabbathMode),this.sabbathModeStatus=Number(t.SabbathModeStatus)||0):(console.log("modesUsage !{}"),this.init_data.PresenceSensorOnOff!=t.PresenceSensorOnOff&&(this.presenceSensorSwitch=Number(t.PresenceSensorOnOff),this.init_data.PresenceSensorOnOff=t.PresenceSensorOnOff),this.init_data.DoorClosedDisplay!=t.DoorClosedDisplay&&(this.doorClosedDisplay=Number(t.DoorClosedDisplay),this.init_data.DoorClosedDisplay=t.DoorClosedDisplay),this.init_data.DoorClosedLights!=t.DoorClosedLights&&(this.doorClosedLights=Number(t.DoorClosedLights),this.init_data.DoorClosedLights=t.DoorClosedLights),this.init_data.DoorOpenedDisplay!=t.DoorOpenedDisplay&&(this.doorOpenedDisplay=Number(t.DoorOpenedDisplay),this.init_data.DoorOpenedDisplay=t.DoorOpenedDisplay),this.init_data.DoorOpenedLights!=t.DoorOpenedLights&&(this.doorOpenedLights=Number(t.DoorOpenedLights),this.init_data.DoorOpenedLights=t.DoorOpenedLights),this.init_data.PresenseSensorDisplay!=t.PresenseSensorDisplay&&(this.presenseSensorDisplay=Number(t.PresenseSensorDisplay),this.init_data.PresenseSensorDisplay=t.PresenseSensorDisplay),this.init_data.PresenseSensorLights!=t.PresenseSensorLights&&(this.presenseSensorLights=Number(t.PresenseSensorLights),this.init_data.PresenseSensorLights=t.PresenseSensorLights),1==this.oneZoneFlag||2==this.oneZoneFlag?(this.getPresenceDisplayText(2==this.presenseSensorDisplay?1:0),this.getPresenceLightText(1==this.presenseSensorLights?0:1)):(this.getPresenceDisplayText(this.presenseSensorDisplay),this.getPresenceLightText(this.presenseSensorLights)),this.getOpenDisplayText(this.doorOpenedDisplay),this.getOpenLightText(this.doorOpenedLights),this.getCloseDisplayText(this.doorClosedDisplay),this.getCloseLightText(this.doorClosedLights),this.RemoteControlModeFlag=Number(t.RemoteControlMode),this.sabbathmode=Number(t.SabbathMode),this.sabbathModeStatus=Number(t.SabbathModeStatus)||0)}}else this.$toast(this.$t("lang.failure"))},toToast:function(){"2"==this.onlineStatus?this.$toast(this.$t("lang.appliance_offline")):0==this.RemoteControlModeFlag?this.$toast({message:'<div style="word-break:keep-all;word-wrap:break-word;overflow:hidden;"><span>'+this.$t("lang.turn_on_the_remote")+"</span></div>",type:"html"}):1==this.sabbathmode&&2==this.sabbathModeStatus?this.$toast({message:'<div style="word-break:keep-all;word-wrap:break-word;overflow:hidden;"><span>'+this.$t("lang.turn_off_the_sabbath")+"</span></div>",type:"html"}):console.log("不提示")},onConfirm1:function(e,s){console.log("当前值：value",e),this.presenseSensorDisplayText=e,this.presenseSensorDisplay=s,this.presenseSensorDisplayPopup=!1},onCancel1:function(){this.presenseSensorDisplayPopup=!1,console.log("取消")},onConfirm2:function(e,s){console.log("当前值：value",e),console.log("当前索引index",s),this.presenseSensorLightText=e,this.presenseSensorLights=s,this.presenseSensorLightPopup=!1},onCancel2:function(){this.presenseSensorLightPopup=!1,console.log("取消")},onConfirm3:function(e,s){console.log("当前值：value",e),this.openDisplayText=e,this.doorOpenedDisplay=s,this.openDisplayPopup=!1},onCancel3:function(){this.openDisplayPopup=!1,console.log("取消")},onConfirm4:function(e,s){console.log("当前值：value",e),this.openLightText=e,this.doorOpenedLights=s,this.openLightPopup=!1},onCancel4:function(){this.openLightPopup=!1,console.log("取消")},onConfirm5:function(e,s){console.log("当前值：value",e),this.closeDisplayText=e,this.doorClosedDisplay=s,this.closeDisplayPopup=!1},onCancel5:function(){this.closeDisplayPopup=!1,console.log("取消")},onConfirm6:function(e,s){console.log("当前值：value",e),this.closeLightText=e,this.doorClosedLights=s,this.closeLightPopup=!1},onCancel6:function(){this.closeLightPopup=!1,console.log("取消")},getPresenceDisplayText:function(e){var s=this;this.presenseSensorDisplayOption.map(function(t){for(var o in t)o==e&&(s.presenseSensorDisplayText=t[o])})},getPresenceLightText:function(e){var s=this;this.presenseSensorLightsOption.map(function(t){for(var o in t)o==e&&(s.presenseSensorLightText=t[o])})},getOpenDisplayText:function(e){var s=this;this.doorOpenedDisplayOption.map(function(t){for(var o in t)o==e&&(s.openDisplayText=t[o])})},getOpenLightText:function(e){var s=this;this.doorClosedLightsOption.map(function(t){for(var o in t)o==e&&(s.openLightText=t[o])})},getCloseDisplayText:function(e){var s=this;this.doorClosedDisplayOption.map(function(t){for(var o in t)o==e&&(s.closeDisplayText=t[o])})},getCloseLightText:function(e){var s=this;this.doorClosedLightsOption.map(function(t){for(var o in t)o==e&&(s.closeLightText=t[o])}),this.showLoading=!1},presenceSensorSwitchHandle:function(e){if("2"==this.onlineStatus)this.$toast(this.$t("lang.appliance_offline"));else if(0==this.RemoteControlModeFlag)this.$toast({message:'<div style="word-break:keep-all;word-wrap:break-word;overflow:hidden;"><span>'+this.$t("lang.turn_on_the_remote")+"</span></div>",type:"html"});else if(1==this.sabbathmode&&2==this.sabbathModeStatus)this.$toast({message:'<div style="word-break:keep-all;word-wrap:break-word;overflow:hidden;"><span>'+this.$t("lang.turn_off_the_sabbath")+"</span></div>",type:"html"});else{this.presenceSensorSwitch=!!e;var s={PresenceSensorOnOff:this.presenceSensorSwitch?1:0};if(console.log("doorSensorSettings页面传到native端的值PresenceSensorOnOffInfo",n()(s)),this.$fireBase.gaWebReport(this.from,"move","modes_usage_proximity_sensor",s),this.$native.sendCmd(this.from,this.nativeKey,this.deviceId,n()(s)),"html"==this.from){this.sendCmdCallback({resultCode:0})}}},sendCmdCallback:function(e){if(console.log("控制人感返回的结果",n()(e)),"0"==e.resultCode||0==e.resultCode)if(this.showLoading=!1,this.$toast(this.$t("lang.success")),this.clickSaveFlag){var s=this;setTimeout(function(){s.goBackSetting()},1e3)}else console.log("不跳转");else this.$toast(this.$t("lang.failure")),this.showLoading=!1,this.getDevicePropertiesInfo()},onBackPressedCallback:function(){this.goBackSetting()},goBackSetting:function(){this.$router.push({path:"/newLights/newLights",query:{language:this.$i18n.locale,from:this.$route.query.from,deviceId:this.$route.query.deviceId,wifiId:this.$route.query.wifiId}})},saveHandle:function(){if("2"==this.onlineStatus)this.$toast(this.$t("lang.appliance_offline"));else if(0==this.RemoteControlModeFlag)this.$toast({message:'<div style="word-break:keep-all;word-wrap:break-word;overflow:hidden;"><span>'+this.$t("lang.turn_on_the_remote")+"</span></div>",type:"html"});else if(1==this.sabbathmode&&2==this.sabbathModeStatus)this.$toast({message:'<div style="word-break:keep-all;word-wrap:break-word;overflow:hidden;"><span>'+this.$t("lang.turn_off_the_sabbath")+"</span></div>",type:"html"});else{this.clickSaveFlag=!0,this.showMainView=!0,this.applianceNameFlag=!1;var e=void 0;if(e="0"==this.oneZoneFlag?{PresenseSensorDisplay:this.presenseSensorDisplay,PresenseSensorLights:this.presenseSensorLights,DoorOpenedDisplay:this.doorOpenedDisplay,DoorOpenedLights:this.doorOpenedLights,DoorClosedDisplay:this.doorClosedDisplay,DoorClosedLights:this.doorClosedLights}:"1"==this.oneZoneFlag?{PresenseSensorLights:this.presenseSensorLights,DoorOpenedLights:this.doorOpenedLights,DoorClosedLights:this.doorClosedLights,DoorOpenedDisplay:this.doorOpenedDisplay,DoorClosedDisplay:this.doorClosedDisplay}:(this.oneZoneFlag,{DoorOpenedLights:this.doorOpenedLights,DoorClosedLights:this.doorClosedLights,DoorOpenedDisplay:this.doorOpenedDisplay,DoorClosedDisplay:this.doorClosedDisplay}),console.log("doorSensorSettings页面传到native端的值paramsInfo",e),this.$native.sendCmd(this.from,this.nativeKey,this.deviceId,n()(e)),"html"==this.from){this.sendCmdCallback({resultCode:"0"})}}}}}),r={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"device_settings_box",attrs:{id:"presence_sensor_box"}},[t("common-header",{attrs:{bg:e.commonHeaderBg}},[t("div",{staticClass:"common_header_left",attrs:{slot:"left"},on:{click:e.goBackSetting},slot:"left"},[t("i",{staticClass:"icon iconfont"},[e._v("")])]),e._v(" "),t("div",{staticClass:"common_header_center oh-1",attrs:{slot:"center"},slot:"center"},[e._v(e._s(e.$t("lang.modes_usage")))])]),e._v(" "),t("div",{staticClass:"main_box"},[t("div",[t("P",{staticClass:"text"},[e._v(e._s(e.$t("lang.select_how_light_modes")))]),e._v(" "),0==e.oneZoneFlag||1==e.oneZoneFlag?t("p",{staticClass:"title_name presence_tittle_name"},[e._v(e._s(e.$t("lang.d_on_user_presence").toUpperCase()))]):e._e(),e._v(" "),0==e.oneZoneFlag||1==e.oneZoneFlag?t("div",{staticClass:"switch_box presence_switch_box"},[t("span",{staticClass:"switch_name lt-30"},[e._v(e._s(e.$t("lang.presence_sensor")))]),e._v(" "),t("van-switch",{attrs:{"active-color":"#000","inactive-color":"#fff",disabled:0==e.RemoteControlModeFlag||1==e.sabbathmode&&2==e.sabbathModeStatus||"2"==e.onlineStatus},on:{change:e.presenceSensorSwitchHandle,click:e.toToast},model:{value:e.presenceSensorSwitch,callback:function(s){e.presenceSensorSwitch=s},expression:"presenceSensorSwitch"}})],1):e._e(),e._v(" "),0==e.oneZoneFlag||1==e.oneZoneFlag?t("div",{style:{opacity:e.presenceSensorSwitch?1:.5}},[t("div",{staticClass:"select_box pt-29"},[t("span",{staticClass:"select_text fw-600"},[e._v(e._s(e.$t("lang.d_light_change_to").toUpperCase()))]),e._v(" "),t("p",{staticClass:"select_content",on:{click:function(){(0==e.sabbathmode||1==e.sabbathmode&&1==e.sabbathModeStatus)&&e.presenceSensorSwitch&&(e.presenseSensorLightPopup=!0),1!=e.sabbathmode&&0!=e.RemoteControlModeFlag&&"2"!=e.onlineStatus||e.toToast()}}},[e._v(e._s(e.presenseSensorLightText))])])]):e._e(),e._v(" "),t("p",{staticClass:"title_name presence_tittle_name"},[e._v(e._s(e.$t("lang.d_during_door_opening").toUpperCase()))]),e._v(" "),t("div",{staticClass:"select_box"},[t("span",{staticClass:"select_text fw-600"},[e._v(e._s(e.$t("lang.d_light_change_to").toUpperCase()))]),e._v(" "),t("p",{staticClass:"select_content",on:{click:function(){(0==e.sabbathmode||1==e.sabbathmode&&1==e.sabbathModeStatus)&&(e.openLightPopup=!0),1!=e.sabbathmode&&0!=e.RemoteControlModeFlag&&"2"!=e.onlineStatus||e.toToast()}}},[e._v(e._s(e.openLightText))])]),e._v(" "),t("p",{staticClass:"title_name presence_tittle_name"},[e._v(e._s(e.$t("lang.d_after_door_closing").toUpperCase()))]),e._v(" "),t("div",{staticClass:"select_box"},[t("span",{staticClass:"select_text fw-600"},[e._v(e._s(e.$t("lang.d_light_change_to").toUpperCase()))]),e._v(" "),t("p",{staticClass:"select_content",on:{click:function(){(0==e.sabbathmode||1==e.sabbathmode&&1==e.sabbathModeStatus)&&(e.closeLightPopup=!0),1!=e.sabbathmode&&0!=e.RemoteControlModeFlag&&"2"!=e.onlineStatus||e.toToast()}}},[e._v(e._s(e.closeLightText))])])],1)]),e._v(" "),t("van-popup",{style:{height:100},attrs:{position:"bottom"},model:{value:e.presenseSensorDisplayPopup,callback:function(s){e.presenseSensorDisplayPopup=s},expression:"presenseSensorDisplayPopup"}},[t("van-picker",{attrs:{columns:e.presenseSensorDisplayList,"confirm-button-text":e.$t("lang.confirm"),"cancel-button-text":e.$t("lang.cancel"),"show-toolbar":""},on:{cancel:e.onCancel1,confirm:e.onConfirm1}})],1),e._v(" "),t("van-popup",{style:{height:100},attrs:{position:"bottom"},model:{value:e.presenseSensorLightPopup,callback:function(s){e.presenseSensorLightPopup=s},expression:"presenseSensorLightPopup"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.presenseSensorLightList,"confirm-button-text":e.$t("lang.confirm"),"cancel-button-text":e.$t("lang.cancel")},on:{cancel:e.onCancel2,confirm:e.onConfirm2}})],1),e._v(" "),t("van-popup",{style:{height:100},attrs:{position:"bottom"},model:{value:e.openDisplayPopup,callback:function(s){e.openDisplayPopup=s},expression:"openDisplayPopup"}},[t("van-picker",{attrs:{columns:e.doorOpenedDisplayList,"confirm-button-text":e.$t("lang.confirm"),"cancel-button-text":e.$t("lang.cancel"),"show-toolbar":""},on:{cancel:e.onCancel3,confirm:e.onConfirm3}})],1),e._v(" "),t("van-popup",{style:{height:100},attrs:{position:"bottom"},model:{value:e.openLightPopup,callback:function(s){e.openLightPopup=s},expression:"openLightPopup"}},[t("van-picker",{attrs:{columns:e.doorOpenedLightList,"confirm-button-text":e.$t("lang.confirm"),"cancel-button-text":e.$t("lang.cancel"),"show-toolbar":""},on:{cancel:e.onCancel4,confirm:e.onConfirm4}})],1),e._v(" "),t("van-popup",{style:{height:100},attrs:{position:"bottom"},model:{value:e.closeDisplayPopup,callback:function(s){e.closeDisplayPopup=s},expression:"closeDisplayPopup"}},[t("van-picker",{attrs:{columns:e.doorClosedDisplayList,"confirm-button-text":e.$t("lang.confirm"),"cancel-button-text":e.$t("lang.cancel"),"show-toolbar":""},on:{cancel:e.onCancel5,confirm:e.onConfirm5}})],1),e._v(" "),t("van-popup",{style:{height:100},attrs:{position:"bottom"},model:{value:e.closeLightPopup,callback:function(s){e.closeLightPopup=s},expression:"closeLightPopup"}},[t("van-picker",{attrs:{columns:e.doorClosedLightList,"confirm-button-text":e.$t("lang.confirm"),"cancel-button-text":e.$t("lang.cancel"),"show-toolbar":""},on:{cancel:e.onCancel6,confirm:e.onConfirm6}})],1),e._v(" "),t("common-bottom",{attrs:{text:e.$t("lang.save")},on:{btnHandle:e.saveHandle}}),e._v(" "),t("loading",{attrs:{"show-loading":e.showLoading}})],1)},staticRenderFns:[]};var l=t("VU/8")(a,r,!1,function(e){t("aai8"),t("V6sn")},"data-v-2f729a29",null);s.default=l.exports},V6sn:function(e,s){},aai8:function(e,s){}});
//# sourceMappingURL=4.486079070643c205a61d.js.map